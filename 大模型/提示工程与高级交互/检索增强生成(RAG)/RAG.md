RAG（Retrieval-Augmented Generation，检索增强生成）

+ 先从资料库里**检索**相关内容

+ 再基于这些内容来生成答案

## 1. 总体介绍

### 1.1 使用场景



+ 模型无法读取所有内容

+ 模型推理成本高

+ 模型推理慢

### 1.2 大致流程



## 2. 逐步拆解

### 2.1 分片

把文档分为多片，

分片方法：

+ 按字数分

+ 按段落分

+ 按章节分

+ 按页码分

### 2.2 索引

1. 通过 Embedding 将分段文本转换为向量

2. 将分段文本和分段向量存入向量数据库中

### 2.3 召回

搜索与用户问题相关片段的过程。

（1）通过 Embedding 模型 将用户输入转换为向量；

（2）在向量数据库中查找 $K$ 个最相似的结果；

向量相似度计算方法：

+ 余弦相似度

+ 欧式距离

+ 点积

### 2.4 重排

+ 方法：cross-encoder

+ 特点

  + 成本高
 
  + 耗时长
 
  + 准确率高

+ 适合场景

  + 精挑细选

### 2.5 生成

## 3. 全链路回顾

### 3.1 提问前链路

### 3.2 提问后链路
